<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 新年倒计时</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans SC"', 'system-ui', '-apple-system', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'Menlo', 'monospace'],
                    }
                }
            }
        }
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        *, *::before, *::after { box-sizing: border-box; }
        body { margin: 0; overflow-x: hidden; }

        /* Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(251, 191, 36, 0.2); border-radius: 99px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(251, 191, 36, 0.4); }

        /* Animations */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { 0% { opacity: 0; transform: scale(0.85); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes shimmer { 0% { background-position: -200% center; } 100% { background-position: 200% center; } }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 20px rgba(251,191,36,0.15); } 50% { box-shadow: 0 0 40px rgba(251,191,36,0.3); } }
        @keyframes pulse-ring { 0% { transform: scale(0.95); opacity: 0.5; } 50% { transform: scale(1); opacity: 1; } 100% { transform: scale(0.95); opacity: 0.5; } }
        @keyframes digit-change { 0% { transform: scale(1); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }
        @keyframes gradient-shift { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }

        .animate-float { animation: float 5s ease-in-out infinite; }
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out both; }
        .animate-fade-in { animation: fadeIn 0.6s ease-out both; }
        .animate-slide-down { animation: slideDown 0.8s ease-out both; }
        .animate-pop-in { animation: popIn 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275) both; }
        .animate-glow { animation: glow 3s ease-in-out infinite; }
        .animate-digit { animation: digit-change 0.3s ease-out; }

        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }

        /* Glass effect */
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.06);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* Gradient text shimmer */
        .shimmer-text {
            background: linear-gradient(90deg, #fde68a, #fbbf24, #f59e0b, #fbbf24, #fde68a);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s linear infinite;
        }

        /* Gradient background animation */
        .animated-bg {
            background: linear-gradient(135deg, #1a0a0a 0%, #2d0a0a 25%, #1a0505 50%, #2a0f0f 75%, #1a0a0a 100%);
            background-size: 400% 400%;
            animation: gradient-shift 15s ease infinite;
        }

        /* Spinner */
        .loader {
            border: 2px solid rgba(255,255,255,0.15);
            border-radius: 50%;
            border-top-color: #fbbf24;
            width: 16px; height: 16px;
            animation: spin 0.7s linear infinite;
            display: inline-block;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Wish item hover */
        .wish-item {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .wish-item:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(251, 191, 36, 0.15);
            transform: translateX(4px);
        }

        /* Time digit flip effect */
        .time-digit {
            position: relative;
            overflow: hidden;
        }
        .time-digit::after {
            content: '';
            position: absolute;
            left: 0; right: 0;
            top: 48%;
            height: 1px;
            background: rgba(0,0,0,0.15);
        }

        /* Input focus ring */
        .input-modern:focus {
            border-color: rgba(251, 191, 36, 0.4);
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1), inset 0 2px 4px rgba(0,0,0,0.2);
        }

        /* Button modern */
        .btn-primary {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            transition: all 0.2s ease;
        }
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
            transform: translateY(-1px);
        }
        .btn-primary:active:not(:disabled) {
            transform: translateY(0) scale(0.97);
        }
        .btn-primary:disabled {
            background: rgba(255,255,255,0.08);
            cursor: not-allowed;
        }

        /* Like button */
        .like-btn {
            transition: all 0.2s ease;
        }
        .like-btn:hover {
            background: rgba(244, 63, 94, 0.15);
            color: #fb7185;
        }
        .like-btn:active {
            transform: scale(0.9);
        }

        /* Separator dot */
        .time-sep {
            animation: pulse-ring 1.5s ease-in-out infinite;
        }
    </style>
</head>
<body class="animated-bg min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;

        /* ===== SVG Icon Components ===== */
        const Icons = {
            Sparkle: ({ className }) => (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}>
                    <path d="M12 2L13.09 8.26L18 6L14.74 10.91L21 12L14.74 13.09L18 18L13.09 15.74L12 22L10.91 15.74L6 18L9.26 13.09L3 12L9.26 10.91L6 6L10.91 8.26L12 2Z"/>
                </svg>
            ),
            Heart: ({ className, filled }) => (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                </svg>
            ),
            Send: ({ className }) => (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9Z"/>
                </svg>
            ),
            Close: ({ className }) => (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M18 6L6 18"/><path d="M6 6L18 18"/>
                </svg>
            ),
            Share: ({ className }) => (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                </svg>
            ),
            Firework: ({ className }) => (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <path d="M12 2v6"/><path d="M12 18v4"/><path d="M4.93 4.93l4.24 4.24"/><path d="M14.83 14.83l4.24 4.24"/>
                    <path d="M2 12h6"/><path d="M18 12h4"/><path d="M4.93 19.07l4.24-4.24"/><path d="M14.83 9.17l4.24-4.24"/>
                    <circle cx="12" cy="12" r="2"/>
                </svg>
            ),
        };

        /* ===== Fireworks Canvas ===== */
        const Fireworks = () => {
            const canvasRef = useRef(null);
            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let w = window.innerWidth, h = window.innerHeight;
                canvas.width = w; canvas.height = h;
                const particles = [];
                const colors = [
                    '#fde68a','#fbbf24','#f59e0b',
                    '#fb7185','#f43f5e',
                    '#818cf8','#6366f1',
                    '#34d399','#10b981',
                    '#ffffff','#e2e8f0'
                ];

                class Particle {
                    constructor(x, y, color, speed) {
                        this.x = x; this.y = y; this.color = color;
                        const v = (speed || 1) * (Math.random() * 3 + 1.5);
                        const angle = Math.random() * Math.PI * 2;
                        this.vx = Math.cos(angle) * v;
                        this.vy = Math.sin(angle) * v;
                        this.alpha = 1;
                        this.decay = Math.random() * 0.012 + 0.006;
                        this.gravity = 0.04;
                        this.size = Math.random() * 2.5 + 0.5;
                    }
                    update() {
                        this.x += this.vx; this.y += this.vy;
                        this.vy += this.gravity;
                        this.vx *= 0.99;
                        this.alpha -= this.decay;
                    }
                    draw(ctx) {
                        ctx.save();
                        ctx.globalAlpha = Math.max(0, this.alpha);
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fillStyle = this.color;
                        ctx.shadowBlur = 6;
                        ctx.shadowColor = this.color;
                        ctx.fill();
                        ctx.restore();
                    }
                }

                const createFirework = (manual) => {
                    const x = Math.random() * w * 0.8 + w * 0.1;
                    const y = Math.random() * (h * 0.4) + h * 0.05;
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    const count = manual ? 60 : 35;
                    const speed = manual ? 1.3 : 1;
                    for (let i = 0; i < count; i++) particles.push(new Particle(x, y, color, speed));
                };

                const handleManual = () => {
                    for (let i = 0; i < 4; i++) setTimeout(() => createFirework(true), i * 120);
                };
                window.addEventListener('manual-firework', handleManual);

                let animId;
                const loop = () => {
                    ctx.fillStyle = 'rgba(26, 10, 10, 0.15)';
                    ctx.fillRect(0, 0, w, h);
                    if (Math.random() < 0.025) createFirework(false);
                    for (let i = particles.length - 1; i >= 0; i--) {
                        particles[i].update(); particles[i].draw(ctx);
                        if (particles[i].alpha <= 0) particles.splice(i, 1);
                    }
                    animId = requestAnimationFrame(loop);
                };

                const onResize = () => { w = window.innerWidth; h = window.innerHeight; canvas.width = w; canvas.height = h; };
                window.addEventListener('resize', onResize);
                loop();

                return () => {
                    cancelAnimationFrame(animId);
                    window.removeEventListener('resize', onResize);
                    window.removeEventListener('manual-firework', handleManual);
                };
            }, []);
            return <canvas ref={canvasRef} className="fixed inset-0 w-full h-full pointer-events-none z-0" />;
        };

        /* ===== Time Card ===== */
        function TimeCard({ value, label, index, isSeconds }) {
            const formatted = String(value).padStart(2, '0');
            const prevRef = useRef(formatted);
            const [animate, setAnimate] = useState(false);

            useEffect(() => {
                if (prevRef.current !== formatted) {
                    setAnimate(true);
                    const t = setTimeout(() => setAnimate(false), 300);
                    prevRef.current = formatted;
                    return () => clearTimeout(t);
                }
            }, [formatted]);

            return (
                <div className={`animate-fade-in-up stagger-${index + 1}`}>
                    <div className={`relative group ${isSeconds ? 'animate-float' : ''}`}>
                        {/* Glow backdrop */}
                        <div className="absolute -inset-1 bg-gradient-to-br from-amber-500/20 to-rose-500/10 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500" />

                        <div className={`glass-card relative rounded-2xl p-3 sm:p-5 md:p-7 flex flex-col items-center justify-center shadow-lg ${isSeconds ? 'animate-glow' : ''}`}>
                            <div className="time-digit">
                                <span className={`font-mono font-bold leading-none block text-center ${animate ? 'animate-digit' : ''} ${isSeconds ? 'text-amber-300' : 'text-white'}`}
                                      style={{ fontSize: 'clamp(2rem, 8vw, 5rem)' }}>
                                    {formatted}
                                </span>
                            </div>
                            <span className="text-amber-200/60 text-[10px] sm:text-xs md:text-sm font-medium tracking-[0.25em] uppercase mt-2 md:mt-3">
                                {label}
                            </span>
                        </div>
                    </div>
                </div>
            );
        }

        /* ===== Time Separator ===== */
        function TimeSep() {
            return (
                <div className="flex flex-col items-center justify-center gap-1.5 md:gap-2 self-center pb-5 md:pb-7">
                    <div className="w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-amber-400/60 time-sep" />
                    <div className="w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-amber-400/40 time-sep" style={{ animationDelay: '0.3s' }} />
                </div>
            );
        }

        /* ===== Share Modal ===== */
        function ShareModal({ isOpen, onClose }) {
            const qrRef = useRef(null);
            useEffect(() => {
                if (isOpen && qrRef.current) {
                    qrRef.current.innerHTML = "";
                    new QRCode(qrRef.current, {
                        text: window.location.href,
                        width: 160, height: 160,
                        colorDark: "#1a0a0a",
                        colorLight: "#ffffff",
                        correctLevel: QRCode.CorrectLevel.H
                    });
                }
            }, [isOpen]);
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fade-in" onClick={onClose}>
                    <div className="bg-white rounded-3xl p-8 max-w-sm w-full text-center animate-pop-in shadow-2xl relative" onClick={e => e.stopPropagation()}>
                        <button onClick={onClose} className="absolute right-4 top-4 text-gray-300 hover:text-gray-500 transition-colors p-1">
                            <Icons.Close className="w-5 h-5" />
                        </button>
                        <div className="w-12 h-12 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-amber-100 to-rose-100 flex items-center justify-center">
                            <Icons.Share className="w-6 h-6 text-amber-600" />
                        </div>
                        <h3 className="text-lg font-bold text-gray-900 mb-1">邀请好友一起许愿</h3>
                        <p className="text-sm text-gray-400 mb-5">扫码或长按识别二维码</p>
                        <div className="bg-gray-50 p-4 rounded-2xl inline-block mb-4 shadow-inner">
                            <div ref={qrRef} />
                        </div>
                        <p className="text-xs text-amber-600 bg-amber-50 py-2.5 px-4 rounded-xl">
                            扫码可直接访问，无需担心拦截
                        </p>
                    </div>
                </div>
            );
        }

        /* ===== Wish Item ===== */
        function WishItem({ wish, onLike, isLiking }) {
            return (
                <div className="wish-item glass-card rounded-xl p-4 flex items-center gap-3">
                    <div className="flex-1 min-w-0">
                        <p className="text-white/90 text-sm md:text-[15px] leading-relaxed break-all">
                            {wish.text}
                        </p>
                    </div>
                    <button
                        onClick={() => onLike(wish.id, wish.likes)}
                        disabled={isLiking}
                        className={`like-btn flex items-center gap-1.5 text-xs rounded-full px-3 py-1.5 shrink-0 border ${
                            wish.likes > 0
                                ? 'text-rose-400 border-rose-500/20 bg-rose-500/10'
                                : 'text-white/40 border-white/5 bg-white/[0.02]'
                        }`}
                    >
                        {isLiking ? (
                            <span className="loader" style={{ width: 12, height: 12, borderWidth: 1.5 }} />
                        ) : (
                            <>
                                <Icons.Heart className="w-3.5 h-3.5" filled={wish.likes > 0} />
                                <span className="font-medium tabular-nums">{wish.likes}</span>
                            </>
                        )}
                    </button>
                </div>
            );
        }

        /* ===== Main App ===== */
        function NewYearCountdown() {
            const targetDate = useMemo(() => new Date('2026-01-01T00:00:00').getTime(), []);
            const [timeLeft, setTimeLeft] = useState(() => calcTime(targetDate));
            const [wishInput, setWishInput] = useState('');
            const [wishes, setWishes] = useState([]);
            const [loading, setLoading] = useState(false);
            const [fetchingWishes, setFetchingWishes] = useState(true);
            const [likingId, setLikingId] = useState(null);
            const [showShare, setShowShare] = useState(false);

            function calcTime(target) {
                const diff = target - Date.now();
                if (diff <= 0) return { days: 0, hours: 0, minutes: 0, seconds: 0 };
                return {
                    days: Math.floor(diff / 86400000),
                    hours: Math.floor((diff / 3600000) % 24),
                    minutes: Math.floor((diff / 60000) % 60),
                    seconds: Math.floor((diff / 1000) % 60)
                };
            }

            useEffect(() => {
                const timer = setInterval(() => setTimeLeft(calcTime(targetDate)), 1000);
                return () => clearInterval(timer);
            }, [targetDate]);

            const fetchWishes = useCallback(async () => {
                try {
                    const res = await fetch('/api/wishes');
                    if (res.ok) {
                        const data = await res.json();
                        setWishes(data);
                    }
                } catch (err) {
                    console.error('Fetch wishes error:', err);
                } finally {
                    setFetchingWishes(false);
                }
            }, []);

            useEffect(() => { fetchWishes(); }, [fetchWishes]);

            const handleAddWish = async (e) => {
                e.preventDefault();
                const text = wishInput.trim();
                if (!text || text.length > 200) return;
                setLoading(true);
                try {
                    window.dispatchEvent(new Event('manual-firework'));
                    const res = await fetch('/api/wishes', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ text })
                    });
                    if (res.ok) {
                        setWishInput('');
                        fetchWishes();
                    } else {
                        const errData = await res.json().catch(() => ({}));
                        alert(errData.error || '发布失败，请重试');
                    }
                } catch {
                    alert('发布失败，请检查网络连接');
                } finally {
                    setLoading(false);
                }
            };

            const handleLike = useCallback(async (id, currentLikes) => {
                if (!id || likingId) return;
                setLikingId(id);
                setWishes(prev => prev.map(w => w.id === id ? { ...w, likes: w.likes + 1 } : w));
                try {
                    const res = await fetch('/api/wishes', {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ id })
                    });
                    if (!res.ok) throw new Error();
                } catch {
                    setWishes(prev => prev.map(w => w.id === id ? { ...w, likes: currentLikes } : w));
                } finally {
                    setLikingId(null);
                }
            }, [likingId]);

            const charCount = wishInput.length;

            return (
                <div className="min-h-screen text-white font-sans relative selection:bg-amber-500/30 selection:text-white">
                    <Fireworks />

                    <ShareModal isOpen={showShare} onClose={() => setShowShare(false)} />

                    <div className="relative z-10 container mx-auto px-4 sm:px-6 py-8 md:py-16 flex flex-col items-center min-h-screen">

                        {/* ===== Header ===== */}
                        <header className="text-center mb-10 md:mb-16 animate-slide-down">
                            <div className="flex items-center justify-center gap-2 mb-5">
                                <Icons.Sparkle className="w-4 h-4 text-amber-400/70" />
                                <span className="tracking-[0.3em] uppercase text-[10px] sm:text-xs font-medium text-amber-300/50">
                                    Countdown to 2026
                                </span>
                                <Icons.Sparkle className="w-4 h-4 text-amber-400/70" />
                            </div>
                            <h1 className="shimmer-text text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-black leading-tight mb-4" style={{ fontFamily: '"Noto Sans SC", sans-serif' }}>
                                新年倒计时
                            </h1>
                            <p className="text-white/30 text-sm md:text-base font-light tracking-wider">
                                距离 2026 年还有
                            </p>
                        </header>

                        {/* ===== Countdown ===== */}
                        <div className="flex items-start justify-center gap-1 sm:gap-2 md:gap-4 w-full max-w-3xl mb-12 md:mb-20">
                            <TimeCard value={timeLeft.days} label="Days" index={0} />
                            <TimeSep />
                            <TimeCard value={timeLeft.hours} label="Hours" index={1} />
                            <TimeSep />
                            <TimeCard value={timeLeft.minutes} label="Min" index={2} />
                            <TimeSep />
                            <TimeCard value={timeLeft.seconds} label="Sec" index={3} isSeconds />
                        </div>

                        {/* ===== Wish Wall ===== */}
                        <div className="w-full max-w-2xl animate-fade-in-up stagger-4">
                            <div className="glass rounded-3xl p-5 sm:p-7 md:p-8 shadow-2xl">

                                {/* Header row */}
                                <div className="flex items-center justify-between mb-6">
                                    <div className="flex items-center gap-3">
                                        <div className="w-8 h-8 rounded-xl bg-gradient-to-br from-rose-500/20 to-amber-500/20 flex items-center justify-center">
                                            <Icons.Heart className="w-4 h-4 text-rose-400" filled />
                                        </div>
                                        <div>
                                            <h2 className="text-base md:text-lg font-bold text-white/90">
                                                云端许愿墙
                                            </h2>
                                            <p className="text-[10px] md:text-xs text-white/30 mt-0.5">
                                                {fetchingWishes ? '加载中...' : `${wishes.length} 条愿望`}
                                            </p>
                                        </div>
                                    </div>

                                    <div className="flex items-center gap-2">
                                        <button
                                            onClick={() => window.dispatchEvent(new Event('manual-firework'))}
                                            className="w-9 h-9 rounded-xl bg-white/[0.04] border border-white/[0.06] flex items-center justify-center text-amber-400/60 hover:text-amber-300 hover:bg-white/[0.08] transition-all active:scale-90"
                                            title="放烟花"
                                        >
                                            <Icons.Firework className="w-4 h-4" />
                                        </button>
                                        <button
                                            onClick={() => setShowShare(true)}
                                            className="h-9 rounded-xl bg-gradient-to-r from-amber-500/15 to-rose-500/15 border border-amber-500/15 px-3 flex items-center gap-1.5 text-amber-300/80 hover:text-amber-200 hover:border-amber-500/25 transition-all text-xs font-medium active:scale-95"
                                        >
                                            <Icons.Share className="w-3.5 h-3.5" />
                                            <span className="hidden sm:inline">分享</span>
                                        </button>
                                    </div>
                                </div>

                                {/* Input form */}
                                <form onSubmit={handleAddWish} className="relative mb-6">
                                    <div className="relative">
                                        <input
                                            type="text"
                                            value={wishInput}
                                            onChange={e => setWishInput(e.target.value)}
                                            maxLength={200}
                                            placeholder="写下你的 2026 新年愿望..."
                                            className="input-modern w-full bg-white/[0.03] border border-white/[0.08] text-white placeholder-white/20 rounded-xl py-3.5 md:py-4 pl-4 md:pl-5 pr-24 text-sm md:text-[15px] transition-all outline-none"
                                        />
                                        <div className="absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1.5">
                                            {charCount > 0 && (
                                                <span className={`text-[10px] tabular-nums ${charCount > 180 ? 'text-rose-400' : 'text-white/20'}`}>
                                                    {charCount}/200
                                                </span>
                                            )}
                                            <button
                                                type="submit"
                                                disabled={!wishInput.trim() || loading}
                                                className="btn-primary text-white font-medium px-4 py-2 rounded-lg flex items-center gap-1.5 text-sm"
                                            >
                                                {loading ? (
                                                    <span className="loader" style={{ width: 14, height: 14, borderWidth: 1.5 }} />
                                                ) : (
                                                    <>
                                                        <Icons.Send className="w-3.5 h-3.5" />
                                                        <span className="hidden sm:inline">许愿</span>
                                                    </>
                                                )}
                                            </button>
                                        </div>
                                    </div>
                                </form>

                                {/* Divider */}
                                <div className="h-px bg-gradient-to-r from-transparent via-white/[0.06] to-transparent mb-5" />

                                {/* Wish list */}
                                <div className="space-y-2.5 max-h-[380px] overflow-y-auto pr-1 custom-scrollbar">
                                    {fetchingWishes ? (
                                        <div className="flex items-center justify-center py-12">
                                            <span className="loader" style={{ width: 24, height: 24, borderWidth: 2 }} />
                                        </div>
                                    ) : wishes.length === 0 ? (
                                        <div className="text-center py-12">
                                            <div className="text-3xl mb-3 opacity-30">
                                                <Icons.Heart className="w-8 h-8 mx-auto text-white/20" />
                                            </div>
                                            <p className="text-white/20 text-sm">还没有愿望，来许下第一个吧</p>
                                        </div>
                                    ) : (
                                        wishes.map(wish => (
                                            <WishItem
                                                key={wish.id}
                                                wish={wish}
                                                onLike={handleLike}
                                                isLiking={likingId === wish.id}
                                            />
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* ===== Footer ===== */}
                        <footer className="mt-16 md:mt-24 text-center pb-8">
                            <p className="text-white/15 text-xs tracking-wider">
                                2026 New Year Countdown
                            </p>
                        </footer>
                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<NewYearCountdown />);
    </script>
</body>
</html>
